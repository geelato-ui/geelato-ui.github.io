(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{843:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"gql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gql","aria-hidden":"true"}},[s._v("#")]),s._v(" GQL")]),s._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("​\tgql是基于元数据的动态查询api，查询对像为实体（实体对应物理表或视图），gql即geelato query language。gql采用json格式，并通过key、value的特殊字符关键字，表示查询字段、查询条件等信息，最终由gql解析器转换成对实体的sql语句。")]),s._v(" "),a("p",[s._v("​\t先来一个简单示例，查询用户信息")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"platform_user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("                          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 请求一个名为platform_user的实体")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0,1"')]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 有这个参数，则表示分页数据组,没有则表示查询单个")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 等值条件")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age|gt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"20"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// “|”表示过滤，gt即表示大于")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name|sw"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模糊查询 ，sw即startWith")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id|in"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// in   查询")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@fs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id,name,age"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// agesum是虚拟列")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@order"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age|+,name|-"')]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 排序")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("​\t经解析之后的sql语句如下：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 服务端解析实体platform_user为对应的表或视图,本例中实体platform_user对应的表名也为platform_user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" platform_user "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" sex"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%张'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("asc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("desc")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("​\tgql关键字如下")]),s._v(" "),a("ul",[a("li",[s._v("@ 用于key，指关键字，如@p，表示需要分页查询")]),s._v(" "),a("li",[s._v("$ 用于value，指变量，查询的字段变量")]),s._v(" "),a("li",[s._v("~ 用于key，指子查询")]),s._v(" "),a("li",[s._v('| 用于key，指过滤，如“age|gt”:"20"，即按gt进行过滤，gt表示大于')])]),s._v(" "),a("h2",{attrs:{id:"查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询","aria-hidden":"true"}},[s._v("#")]),s._v(" 查询")]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("@关键字")])]),s._v(" "),a("p",[s._v("在查询配置中，关键字作为属性字段")])])]),s._v(" "),a("p",[s._v("@p[可选]  page的简写，有则表示分页查询，无则表示查询所有")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分页，每页10条记录，取第0页的数据")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@p'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'0,10'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("@fs[可选]  fields的简写，有则表示查询指定列，无则表示查询所有")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 查询列表，共三个列")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id,name,description'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v('@group [可选]"userId|maxId>=100"、"userId|sum(age)>=100"')]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 分组")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("@having[可选]与@group一起使用")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v('@order [可选]指定排序字段，如果有@order，则服务端默认排序无效。例如："@order":"name|-,age|+"')]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("@key 在客户端发请求前自动生成，用于服务端解析缓存的key，客户端查询时，会自动依据实体名称、实体查询条件自动生成，规则如下：实体名称+属性数+@fs的字段数+TODO")]),s._v(" "),a("p",[s._v("@w    [可选]where的简写，更高级的查询语句片段，暂不支持\n"),a("strong",[s._v("$ 指变量")]),s._v("，查询的字段变量\n"),a("strong",[s._v("~ 指子查询或子实体")]),s._v("，用于查询是子查询，用于保存则是子实体信息")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[s._v("|过滤")])])]),s._v(" "),a("p",[s._v("|后面的是过滤操作（函数）或比较表达式，支持的过滤操作有：\nmax        maxId|max,取maxId的最大值\nmin\nsumx\navg\ncount\nfirst\nlast\nlcase\nucase\nlen\nmid  暂不支持\nnow  暂不支持\nround  暂不支持\nformat  暂不支持\nhaving having:maxId>=100，取maxId大于等于100的记录")]),s._v(" "),a("p",[s._v("as 别名，格式name as alias，例如agesum:age|sum表示将求和的列名重命名为agesum。as可用空格替代\n:  参数，例如having:maxId>=100表示having的参数为：maxId>=100")]),s._v(" "),a("p",[s._v("/**")]),s._v(" "),a("ul",[a("li",[s._v("查询数组")]),s._v(" "),a("li",[s._v("多级对象")]),s._v(" "),a("li",[s._v("动态列")]),s._v(" "),a("li",[s._v("查询：")]),s._v(" "),a("li",[s._v("大于、小于、分组、in、")]),s._v(" "),a("li",[s._v('eq("eq"), neq("neq"), lt("lt"), lte("lte"), gt("gt"), gte("gte"), startWith("sw"), endWith("ew"), contains("contains");')]),s._v(" "),a("li",[s._v("in 已支持\n**/")]),s._v(" "),a("li")]),s._v(" "),a("p",[s._v("示例")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"platform_user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("                           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//请求一个名为User的实体（Table或视图）")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0,1"')]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//有这个参数，则表示分页数据组,没有则表示查询单个")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//等值条件")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age|gt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"20"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//c即compare，表示大于、小于、等于...")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name|sw"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//like 查询")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id|in"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1,2,3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//in   查询")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@fs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id,name,age,agesum"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//agesum是虚拟列，在服务端元数据管理中定义age|sum agesum")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@order"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age|+,name|-"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//如果有@order，则服务端默认排序无效；@fs排序无效，指定@order，可以指定先按哪个字段排序，可与@fs的不一致。")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@w"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex=0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//更高级的查询语句片段")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"USER8900"')]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在客户端发请求前自动生成，用于服务端解析缓存的key")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~Moment"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$../platform_user.id"')]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//缺省依赖路径，从同级Object的路径开始")]),s._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@fs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id,userId,maxId|max id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//结合下方的分组|g，取同组userId，Id的最大值|max，重命名为maxId")]),s._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@group"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userId"')]),s._v("                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//按userId分组(多个字段分组用逗号分隔userId,xx)")]),s._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@having"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxId|gt:100,"')]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~Comment"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//请求一个名为Comment的Array")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0,6"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"momentId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$Moment.id"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//完整依赖路径")]),s._v("\n\t  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("场景1：涉及关联子表查询，查询返回user列表中带有所属组织的名称列，同时查询条件中，带有组织名称的模糊查询。\n方案：直接查询user视图，视图中带有组织表的组织名称列，简化客户端的规则")]),s._v(" "),a("p",[s._v("场景2：查找客户 \"Bush\" 或 \"Adams\" 拥有超过 1500 的订单总金额\nSELECT Customer,SUM(OrderPrice) FROM Orders\nWHERE Customer='Bush' OR Customer='Adams'\nGROUP BY Customer\nHAVING SUM(OrderPrice)>1500")]),s._v(" "),a("h2",{attrs:{id:"更改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改","aria-hidden":"true"}},[s._v("#")]),s._v(" 更改")]),s._v(" "),a("p",[s._v("新增、修改信息")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 业务代码，用于在后端做业务规则检查用，暂未实现")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@biz"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myBizCode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"platform_user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"张三"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"loginName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"z3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"email"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("geelato@geelato"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 字典信息采用有直观含义的字符串信息来表示具体的值")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sex"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"male"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tel"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"19999999999"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"province"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"440000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"city"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"440100"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// enable 等boolean值，采用数值存储，在保存前需转换")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"enable"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#platform_demo_entity"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \t    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$parent.province"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$parent.name"')]),s._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@biz'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'platform_page_config'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'code'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'IUJDYWGS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'content'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("p",[s._v("注意：实体之间的数据存在依赖关系时，JSON结构上体现为父子节点的关系，子节点只能依赖父节点及以上节点的数据，不能依赖父节点兄弟节点的数据，所以变量只有$parent，只能上向引用。")]),s._v(" "),a("h2",{attrs:{id:"安全"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安全","aria-hidden":"true"}},[s._v("#")]),s._v(" 安全")]),s._v(" "),a("p",[s._v("服务端在配置实体时，可以设置默认查询排序字段\n服务端定义哪些字段可以模糊查询条件，哪些字段可以作为查询条件。\n服务端定义哪些字段有权限可以查询出来，即限制@fs。")]),s._v(" "),a("h2",{attrs:{id:"性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能","aria-hidden":"true"}},[s._v("#")]),s._v(" 性能")]),s._v(" "),a("p",[s._v("为提高性能，服务端默认不自动去空\n第一个字符是否为@,是的话则获取指令handler\n检查“|”后的关键字是否支持")])])}],!1,null,null,null);t.default=e.exports}}]);